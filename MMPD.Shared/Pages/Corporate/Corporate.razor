@page "/corporate"
@inject IJSRuntime JSRuntime
@using MMPD.Data.Models
@using MMPD.Data.Context
@inject IDirectoryService DirectoryService
@inject NavigationManager NavigationManager
@using MMPD.Shared.Components
@using MMPD.Shared.Layout
@using MMPD.Data.Data
@using Telerik.Blazor
@using Telerik.Blazor.Components
@using Telerik.SvgIcons
@inject MMPD.Shared.Services.LayoutState LayoutState

<PageTitle>Corporate</PageTitle>

@if (Departments == null || Departments.Count == 0)
{
    <p>Loading corporate data...</p>
}
else
{
        <div class="button-page-container">
        <div class=" scrollable-wrapper">
            <TelerikListView Data="@Departments" EnableLoaderContainer="true" Class="button-list-container ">
                <Template Context="dept">
                    <NavLink href="@($"/corporate/{dept.Id}")" class=" k-text-no-underline k-shadow">
                        <div class="menu-item rounded-3 k-d-flex k-flex-row k-text-uppercase k-font-size-lg k-font-semibold k-text-white k-justify-content-start k-align-items-center k-pl-10 k-bg-gradient k-py-6 hover:k-elevation-2">
                            @dept.DeptName
                        </div>
                    </NavLink>
                </Template>
            </TelerikListView>
        </div>
        </div>
    
}

<style>
    .menu-item {
    background-color: #ff6358;
    margin: 8px 10px;
    border-radius: 0.75rem;
    flex: 1;
    letter-spacing: 0.5px;
    /* padding: 10px 0; */
    }

    .menu-item:hover {
    transition: transform 0.2s ease-in, opacity 0.2s ease-in;
    transform: translateY(0) scale(0.95);
    background-color: #FA574B;
    }

    .button-page-container {
        height: calc(100% - 60px);
        display: flex;
        flex-direction: column;
        background-color: var(--kendo-color-secondary-emphasis);
    }

    .button-list-container {
        background-color: transparent !important;
        flex: 1;
        display: flex;
        flex-direction: column;
        margin: 1px 0;
        padding: 2px 0;
        overflow-y: auto; /* Enable scrolling */
        
    }
    .scrollable-wrapper {
    flex: 1;
    overflow-y: auto;
    margin: 1px 0;
    padding: 0px 0;
    
    /* Hide scrollbar */
    scrollbar-width: none;
    -ms-overflow-style: none;
}

    .scrollable-wrapper::-webkit-scrollbar {
        display: none;
    }



   
</style>

@code {
    private List<Department>? Departments = new();
    private Location? corporate;

    private List<FooterNav.FooterItem> FooterNavItems = new()
    {
        new FooterNav.FooterItem(CustomIcons.Home, "Home", "/"),
        new FooterNav.FooterItem(CustomIcons.MetalMart, "Metal Mart", "/metalmart"),
        new FooterNav.FooterItem(CustomIcons.ServiceCenter, "Service Center", "/servicecenter"),
        new FooterNav.FooterItem(CustomIcons.Plant, "Plant", "/plant")
    };

    protected override async Task OnInitializedAsync()
    {

        corporate = await DirectoryService.GetLocationWithDepartmentsAsync(1);
        Departments = corporate?.Departments.OrderBy(d => d.DeptName).ToList() ?? new List<Department>();
    }
    private HeaderCardModels.HeadInfoCardModel CorporateHeadCard = new()
    {
        Title = "Corporate",
        Address = "1500 Hamilton Rd",
        City = "Bossier City",
        State = "LA",
        Zip = "71111",
        Subtitle1 = "Corp. Phone",
        Phone = "(888) 245-3696",
        Subtitle2 = "Corp. Email",
        Email = "info@mcelroymetal.com",
        Subtitle3 = "IT Help Desk",
        Phone2 = "(866) 634-5111"
    };

    protected override void OnAfterRender(bool firstRender)
    {
        if (firstRender)
        {
            // Set the header info for Corporate page
            LayoutState.SetHeader(CorporateHeadCard);
            // Set the footer navigation for Corporate page
            LayoutState.SetFooter(FooterNavItems);
        }
    }

    
}
